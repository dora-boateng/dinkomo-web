{"version":3,"sources":["analytics.js","app.js","dialogs.js","forms.js","resources.js","utilities.js","plugins/alphabet-field.js","plugins/alphabet-lookup.js","plugins/copy.js","plugins/country-lookup.js","plugins/definition-lookup.js","plugins/dictionary-old.js","plugins/dictionary.js","plugins/lang-lookup.js","plugins/lang-search.js","plugins/reference-lookup.js","plugins/res-lookup.js","plugins/tag-search.js"],"names":["Analytics","track","event","data","keenClient","this","log","referrer","document","keen","timestamp","Date","toISOString","addons","meta","ip","ua","push","name","input","output","ua_string","addEvent","err","res","console","error","msg","isLocalEnvironment","App","_kbFocus","init","root","$","attr","window","location","hostname","match","ajaxSetup","headers","X-CSRF-TOKEN","ready","Dialogs","Forms","tooltip","bind","setKeyboardFocus","keyboardInput","letter","value","focus","openDialog","id","open","closeDialogs","close","redirect","path","length","urlencode","str","encodeURIComponent","toString","replace","click","dropdown","dialog","hide","toggle","box","is","fadeIn","fadeOut","setupAddResourceForm","find","val","addResource","code","addResourceDialogForm","lang","trim","type","_def","draggable","drag","Utilities","scroll","scrollSensitivity","getDefinitionForm","setupLangSearch","items","max","plugins","selectize","valueField","labelField","searchField","options","create","maxItems","render","item","escape","score","search","getScoreFunction","option","title","parentName","hint","altNames","load","query","callback","ajax","url","success","results","setupDefinitionLookup","form","q","clear","language","langCode","langName","submit","preventDefault","html","endpoint","xhr","status","each","i","resourceType","parentData","parentLanguage","uri","subType","translation","practical","eng","mainLanguage","resetDefinition","lookupDefinition","setDefinitionResult","obj","definitions","def","en","Resources","checkDefinitionTitle","addClass","onError","onSuccess","findDefinitionByTitle","setData","key","localStorage","setItem","setState","sessionStorage","getState","defaultValue","getItem","info","fn","alphabetField","selectizeItems","Array","isArray","undefined","itemsArray","selectizePlugins","onItemAdd","jQuery","alphabetLookup","setup","resourceLookup","extend","apiEndpoint","transliteration","copyOnClick","cb","Clipboard","selector","css","on","e","clearSelection","alert","actionKey","action","test","navigator","userAgent","countryLookup","definitionLookup","label","mainTitle","DiNkomoDictionary","container","clearedContainer","onSubmit","locale","onSubmitError","formatLanguageResult","formatDefinitionResult","row","parentCode","parentUri","definition","dictionary","medium","languageLookup","langSearch","referenceLookup","fullCitation","delimiter","loadThrottle","tagSearch"],"mappings":"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","file":"dinkomo.js","sourcesContent":["/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n\r\n/**\r\n * @todo  User http://requirejs.org/ as a dependency injector?\r\n */\r\nvar Analytics =\r\n{\r\n  /**\r\n   * @param string event\r\n   * @param object data\r\n   */\r\n  track: function(event, data) {\n\n    // Performance check.\r\n    if (typeof keenClient == 'undefined')\n      return this.log('Keen client not loaded.');\n\n    // Configure defaults & Keen.io parameters.\n    data = data || {};\r\n    data.referrer = document.referrer;\n    data.keen = data.keen || {};\n    data.keen.timestamp = new Date().toISOString();\n    data.keen.addons = data.keen.addons || [];\n    data.meta = {\n      ip: '${keen.ip}',\n      ua: '${keen.user_agent}'\n    };\n\n    data.keen.addons.push({\n      name: \"keen:ip_to_geo\",\n      input: {\n        ip: \"meta.ip\"\n      },\n      output: \"meta.geo_data\"\n    });\n\n    data.keen.addons.push({\n      name: \"keen:ua_parser\",\n      input: {\n        ua_string: \"meta.ua\"\n      },\n      output: \"meta.ua_data\"\n    });\n\n    // Track event w/ Keen.io\r\n    keenClient.addEvent(event, data, function(err, res) {\n\r\n      // Handle errors.\r\n      if (err) {\r\n        console.error('Keen.io error: ' + err);\n      }\n\n      else\n      {\n\n      }\n    });\n  },\r\n\r\n\tlog: function(msg) {\r\n\t\tif (console && this.isLocalEnvironment) {\r\n        console.log('Analytics.js - '+ msg);\r\n      }\r\n\t}\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2015, all rights reserved.\r\n *\r\n */\r\nvar App =\r\n{\r\n  _kbFocus: null,\r\n\r\n\tinit: function()\r\n\t{\r\n\t\t// Save URL root for redirects.\r\n      this.root = $('base').attr('href');\r\n\r\n      // Set the environment of the app.\r\n      this.isLocalEnvironment = (\r\n        window.location.hostname == 'localhost' ||\r\n        window.location.hostname.match(/.*\\.local$/i) ||\r\n        window.location.hostname.match(/.*\\.vagrant$/i)\r\n      ) ? true : false;\r\n\r\n        // Setup AJAX headers.\r\n        $.ajaxSetup({\r\n            headers: {\r\n                'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n            }\r\n        });\r\n\r\n        // Initialize other objects.\r\n        $(document).ready(function() {\r\n\r\n            Dialogs.init();\r\n            Forms.init();\r\n\r\n            // Setup Bootstrap tooltips.\r\n            $('[data-toggle=\"tooltip\"]').tooltip();\r\n\r\n            this.log('App initialized.');\r\n        }.bind(this));\r\n\t},\r\n\r\n    /**\r\n     *\r\n     */\r\n    setKeyboardFocus: function(input) {\r\n        this._kbFocus   = input;\r\n    },\r\n\r\n    /**\r\n     * TODO: insert letter at cursor, not at the end of the string.\r\n     */\r\n    keyboardInput: function(letter)\r\n    {\r\n        if (this._kbFocus) {\r\n            this._kbFocus.value = this._kbFocus.value + letter;\r\n            this._kbFocus.focus();\r\n        }\r\n\r\n        return false;\r\n    },\r\n\r\n\topenDialog : function(id)\r\n\t{\r\n\t\tconsole.log('App.openDialog deprecated');\r\n\r\n        return Dialogs.open(id);\r\n\t},\r\n\r\n\tcloseDialogs : function()\r\n    {\r\n\t\tconsole.log('App.closeDialogs deprecated');\r\n\r\n        return Dialogs.close();\r\n\t},\r\n\r\n\tredirect: function(path) {\r\n\t\twindow.location = path.length > 1 ? this.root + path : this.root;\r\n\t},\r\n\r\n\turlencode : function(str)\r\n\t{\r\n\t\treturn encodeURIComponent((str + '').toString())\r\n    \t\t.replace(/!/g, '%21')\r\n    \t\t.replace(/'/g, '%27')\r\n    \t\t.replace(/\\(/g, '%28')\r\n    \t\t.replace(/\\)/g, '%29')\r\n    \t\t.replace(/\\*/g, '%2A')\r\n    \t\t.replace(/%20/g, '+');\r\n\t},\r\n\r\n\tlog: function(msg) {\r\n\t\tif (console && this.isLocalEnvironment) {\r\n            console.log('App.js - '+ msg);\r\n        }\r\n\t}\r\n};\r\n\r\nApp.init();\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2015, all rights reserved.\r\n *\r\n */\r\nvar Dialogs =\r\n{\r\n    init: function() {\r\n\r\n    \t// Attach event listeners.\r\n    \t$('.close').click(App.closeDialogs.bind(App));\r\n        // $('.has-tooltip').popup({on: 'hover'});\r\n        // $('.has-inline-tooltip').popup({inline: true, on: 'hover'});\r\n        $('.has-dropdown-menu').dropdown();\r\n    },\r\n\r\n    open: function(dialog)\r\n    {\r\n\t\t$('.dialog').hide();\r\n        return this.toggle(dialog);\r\n    },\r\n\r\n    toggle: function(dialog)\r\n    {\r\n        box\t= '.dialog.'+ dialog;\r\n        if ($(box).is(':hidden')) $(box).fadeIn(240);\r\n        else $(box).fadeOut(240);\r\n        return false;\r\n    },\r\n\r\n\tclose : function() {\r\n\t\t$('.dialog').fadeOut(240);\r\n\t\treturn false;\r\n\t},\r\n\r\n    //\r\n    // \"Add resource\" dialog.\r\n    //\r\n\r\n    setupAddResourceForm: function(input)\r\n    {\r\n        // Semantic UI search input.\r\n        // $(input).search({\r\n        //     apiSettings: {\r\n        //         method : 'POST',\r\n        //         url: 'language/search/{query}?semantic=1'\r\n        //     },\r\n        //     searchFields: ['name', 'alt_names'],\r\n        //     searchDelay: 500,\r\n        //     searchFullText: false,\r\n        //     onSelect: function(result, response) {\r\n        //         document.addResourceDialogForm.lang.value = result.code;\r\n        //     }\r\n        // });\r\n\r\n        // Clear input.\r\n        $(input).find('.prompt').val('');\r\n    },\r\n\r\n    addResource: function()\r\n    {\r\n        // Get language code.\r\n        var code = document.addResourceDialogForm.lang.value.trim();\r\n        if (code.length < 3) {\r\n            return false;\r\n        }\r\n\r\n        App.redirect(code +'/+'+ $(document.addResourceDialogForm.type).val());\r\n        return false;\r\n    }\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2015, all rights reserved.\r\n *\r\n */\r\nvar Forms =\r\n{\r\n    /**\r\n     * Definition lookup forms.\r\n     */\r\n    _def: {},\r\n\r\n    /**\r\n     *\r\n     */\r\n    init: function() {\r\n\r\n        // Attach helper keyboard to text inputs.\r\n        $('.text-input').focus(function() {\r\n            App.setKeyboardFocus(this);\r\n            $('#keyboard').fadeIn(300);\r\n        });\r\n\r\n        // Remove helper keyboard when focus is lost.\r\n        $('.en-text-input').focus(function() {\r\n            App.setKeyboardFocus(null);\r\n            $('#keyboard').fadeOut(300);\r\n        });\r\n\r\n        // Make keyboard draggable.\r\n        $('#keyboard').draggable({\r\n            drag: function(event) {\r\n                Utilities.log(event);\r\n            },\r\n            scroll: true,\r\n            scrollSensitivity: 80\r\n        });\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    getDefinitionForm: function(name) {\r\n        return this._def[name];\r\n    },\r\n\r\n    /**\r\n     * Prepares a language search input for AJAX calls.\r\n     *\r\n     * @param mixed input\r\n     * @param object items\r\n     * @param int max\r\n     * @param array plugins\r\n     */\r\n    setupLangSearch: function(input, items, max, plugins)\r\n    {\r\n        // Performance check.\r\n        if (!$(input)) return;\r\n\r\n        // Initialize selectize input.\r\n        var $select = $(input).selectize({\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'altNames'],\r\n            options: items,\r\n            plugins: (plugins || null),\r\n            create: false,\r\n            maxItems: (max || 1),\r\n            render: {\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n                score: function(search) {\r\n                    return this.getScoreFunction(search);\r\n                },\r\n                option: function(item, escape)\r\n                {\r\n                    // Language title\r\n                    var title   = item.name;\r\n                    if (item.parentName && item.parentName.length)\r\n                        title += ' (a sub-language of '+ item.parentName +')';\r\n\r\n                    // Add a short desciption\r\n                    var hint = '';\r\n                    if (item.altNames && item.altNames.length)\r\n                        hint = '<span class=\"hint\"> &mdash; Also known as '+ item.altNames + '</span>';\r\n\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(title) + '</span>' + hint +\r\n                            '</div>';\r\n                }\r\n            },\r\n            load: function(query, callback) {\r\n                if (!query.trim().length) return callback();\r\n                $.ajax({\r\n                    url: App.root +'api/0.1/language/search/' + App.urlencode(query.trim()),\r\n                    type: 'GET',\r\n                    error: function() {\r\n                        callback();\r\n                    },\r\n                    success: function(results) {\r\n                        callback(results);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n    },\r\n\r\n    /**\r\n     * @param name\r\n     * @param options\r\n     */\r\n    setupDefinitionLookup: function(name, options)\r\n    {\r\n        // Retrieve form elements.\r\n        name = name || 'search';\r\n        options = options || {};\r\n\r\n        this._def[name] = {\r\n            form: $(document[name]),\r\n            results: options.results || $('#results'),\r\n            query: options.query || $(document[name].q),\r\n            clear:  options.clear || $('input[name=clear]'),\r\n            language: {\r\n                code: options.langCode || false,\r\n                name: options.langName || 'another language'\r\n            }\r\n        };\r\n\r\n        // Form submit function.\r\n        $(document[name]).submit([this._def[name]], function(event)\r\n        {\r\n            event.preventDefault();\r\n            var form = event.data[0];\r\n\r\n            // Performance check\r\n            var query\t= form.query.val().trim();\r\n            if (query.length < 2) {\r\n                form.query.focus();\r\n                return false;\r\n            }\r\n\r\n            // Display loading message\r\n            form.results.html('<div class=\"center\">looking up '+ query +'...</div>');\r\n\r\n            // Build endpoint.\r\n            // var endpoint = App.root + '0.1';\r\n            var endpoint = '/api/0.1';\r\n            if (options.langCode) {\r\n                endpoint += '/word/search/' + App.urlencode(query) + '?lang='+ options.langCode;\r\n            } else {\r\n                endpoint += '/search/' + App.urlencode(query) + '?method=fulltext';\r\n            }\r\n\r\n            // Start ajax request\r\n            $.ajax({\r\n                url: endpoint,\r\n                type: 'GET',\r\n                error: function(xhr, status, error) {\r\n                    App.log('XHR error on search form: '+ error +' ('+ xhr.status +')');\r\n                    form.results.html(\r\n                        '<div class=\"center\">'+\r\n                            'Seems like we ran into a snag <span class=\"fa fa-frown-o\"></span> '+\r\n                            'please try again later.'+\r\n                        '</div>');\r\n                },\r\n                success: function(results)\r\n                {\r\n                    if (results.length > 0)\r\n                    {\r\n                        var html\t=\r\n                            '<div class=\"center\">'+\r\n                            'we found <em>'+ results.length +'</em> results'+\r\n                            ' for <i>'+ query +'</i>.'+\r\n                            '</div><ol>';\r\n\r\n                        $.each(results, function(i, res) {\r\n\r\n                            switch (res.resourceType)\r\n                            {\r\n                                case 'language':\r\n                                    var parentData = res.parentLanguage ?\r\n                                        ' is a child language of '+\r\n                                        '<a href=\"'+ res.parentLanguage.uri +'\">'+\r\n                                        res.parentLanguage.name +\r\n                                        '</a>' : '';\r\n                                    html +=\r\n                                        '<li>'+\r\n                                        '<a href=\"'+ res.uri +'\">'+ res.name +'</a>'+\r\n                                        ' <small>(language)</small>'+ parentData +\r\n                                        '</li>';\r\n                                    break;\r\n\r\n                                default:\r\n                                    html +=\r\n                                        '<li>'+\r\n                                        '<a href=\"'+ res.uri +'\">'+ res.title +'</a>'+\r\n                                        ' <small>('+ res.subType +')</small>'+\r\n                                        ' is a '+ res.type +' that means <i>'+ res.translation.practical.eng +'</i> in '+\r\n                                        ' <a href=\"'+ res.mainLanguage.uri +'\">'+ res.mainLanguage.name +'</a>'+\r\n                                        '</li>';\r\n                            }\r\n                        });\r\n\r\n                        form.results.html(html +'</ol>');\r\n                    }\r\n\r\n                    else {\r\n                        form.results.html('<div class=\"center\">we couldn\\'t find anything matching that query <span class=\"fa fa-frown-o\"></span></div>');\r\n                    }\r\n                }\r\n            });\r\n\r\n            //return false;\r\n        });\r\n\r\n        // Form clearing.\r\n        this._def[name].clear.click(function() {\r\n           this.query.val('');\r\n           this.results.html('<div class=\"center\">Use this <em>&#10548;</em> to lookup words<br />in '+ this.language.name +'.</div>');\r\n           this.query.focus();\r\n       }.bind(this._def[name]));\r\n\r\n       // Submit form.\r\n       if (this._def[name].query.val().trim().length > 0) {\r\n           this._def[name].form.submit();\r\n       }\r\n    },\r\n\r\n    /**\r\n     *\r\n     * @param name\r\n     */\r\n    resetDefinition: function(name)\r\n    {\r\n        // Performance check.\r\n        if (!this._def[name]) return;\r\n\r\n        // Clear form.\r\n        this._def[name].query.value = '';\r\n        this._def[name].results.html(\r\n            '<div class=\"center\">'+\r\n                'Use this <em>&#10548;</em> to lookup words'+\r\n                '<br />in '+ this._def[name].langName +'.'+\r\n            '</div>'\r\n        );\r\n\r\n        this._def[name].query.focus();\r\n    },\r\n\r\n    /**\r\n     *\r\n     */\r\n    lookupDefinition: function(name)\r\n    {\r\n        // Performance check\r\n        if (!this._def[name]) return;\r\n\r\n        var query = this._def[name].query.value.trim();\r\n        if (query.length < 2) {\r\n            this._def[name].query.focus();\r\n            return false;\r\n        }\r\n\r\n        // Display loading message\r\n        this._def[name].results.html('<div class=\"center\">looking up '+ query +'...</div>');\r\n\r\n        // Start ajax request\r\n        $.ajax({\r\n            url: App.root +'/api/definition/search/' + App.urlencode(query),\r\n            type: 'POST',\r\n\r\n            // onError\r\n            error: function(xhr, status, error)\r\n            {\r\n                Forms.log('XHR error on search form: '+ xhr.status +' ('+ error +')');\r\n                Forms.setDefinitionResult(name,\r\n                    '<div class=\"center\">'+\r\n                        'Seems like we ran into a snag <span class=\"fa fa-frown-o\"></span> try again?'+\r\n                    '</div>'\r\n                );\r\n            },\r\n\r\n            // onSuccess\r\n            success: function(obj)\r\n            {\r\n                if (obj.results.definitions.length > 0)\r\n                {\r\n                    var html\t=\r\n                        '<div class=\"center\">'+\r\n                            'we found <em>'+ obj.results.definitions.length +'</em> definitions'+\r\n                            ' for <i>'+ obj.results.query +'</i>.'+\r\n                        '</div><ol>';\r\n\r\n                    $.each(obj.results.definitions, function(i, def)\r\n                    {\r\n                        html +=\r\n                            '<li>'+\r\n                                '<a href=\"'+ def.uri +'\">'+ def.data +'</a>'+\r\n                                ' <small>('+ def.type +')</small>'+\r\n                                ' is a word that means <i>'+ def.translation.en +'</i> in '+\r\n                                ' <a href=\"'+ def.language.uri +'\">'+ def.language.name +'</a>'+\r\n                            '</li>';\r\n                    });\r\n\r\n                    Forms.setDefinitionResult(name, html +'</ol>');\r\n                }\r\n\r\n                else {\r\n                    Forms.setDefinitionResult(name,\r\n                        '<div class=\"center\">'+\r\n                            'we couldn\\'t find anything matching that query <span class=\"fa fa-frown-o\"></span>'+\r\n                        '</div>'\r\n                    );\r\n                }\r\n            }\r\n        });\r\n\r\n        return false;\r\n    },\r\n\r\n    /**\r\n     * TODO: when is this method used?\r\n     */\r\n    setDefinitionResult: function(name, html)\r\n    {\r\n        // Performance check\r\n        if (!this._def[name]) return;\r\n\r\n        this._def[name].results.html(html);\r\n    },\r\n\r\n\tlog: function(msg) {\r\n\t\tif (console && this.isLocalEnvironment)\r\n            console.log('Forms.js - '+ msg);\r\n\t}\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2015, all rights reserved.\r\n *\r\n */\r\nvar Resources =\r\n{\r\n    /**\r\n     * Shortcut to verfify a definition title form input.\r\n     */\r\n    checkDefinitionTitle: function(input)\r\n    {\r\n        // Performance check.\r\n        if (!input || !input.trim().length) return;\r\n\r\n        // Add loading class.\r\n        input.addClass('loading');\r\n\r\n        var options =\r\n        {\r\n            langCode: false,\r\n            onError: function(xhr, status, error) {\r\n                Resources.log('XHR error: '+ error);\r\n            }.bind(input),\r\n            onSuccess: function(obj) {\r\n\r\n            }\r\n        };\r\n\r\n        // Lookup definition title.\r\n        this.findDefinitionByTitle(input.value, function() {\r\n\r\n        });\r\n    },\r\n\r\n    /**\r\n     * Looks up a definition by title.\r\n     */\r\n    findDefinitionByTitle: function(title, options)\r\n    {\r\n        // Performance check.\r\n        if (!title.trim().length) return;\r\n        options = options || {};\r\n\r\n        // Build endpoint.\r\n        var endpoint = App.root +'/definition/exists/' + App.urlencode(title) +\r\n            (options.langCode ? '?lang='+ options.langCode : '');\r\n\r\n        // Lookup definitions by title.\r\n        $.ajax({\r\n            url: endpoint,\r\n            type: 'POST',\r\n            error: options.onError,\r\n            success: options.onSuccess\r\n        });\r\n    },\r\n\r\n\tlog: function(msg) {\r\n\t\tif (console && this.isLocalEnvironment)\r\n            console.log('Resources.js - '+ msg);\r\n\t}\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2015, all rights reserved.\r\n *\r\n */\r\nvar Utilities =\r\n{\r\n    /**\r\n     * @param string str\r\n     * @return string\r\n     */\r\n    urlencode : function(str)\r\n    {\r\n        return encodeURIComponent((str + '').toString())\r\n            .replace(/!/g, '%21')\r\n            .replace(/'/g, '%27')\r\n            .replace(/\\(/g, '%28')\r\n            .replace(/\\)/g, '%29')\r\n            .replace(/\\*/g, '%2A')\r\n            .replace(/%20/g, '+');\r\n    },\r\n\r\n    /**\r\n     * @param string|int key\r\n     * @param string value\r\n     */\r\n    setData: function(key, value) {\r\n        if (window.localStorage && typeof window.localStorage.setItem == 'function') {\r\n            window.localStorage.setItem(key, value);\r\n        }\r\n\r\n        else\r\n        {\r\n            if (!this.localStorage) {\r\n                this.localStorage = {};\r\n            }\r\n\r\n            this.localStorage[key] = value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param string|int key\r\n     * @param string value\r\n     */\r\n    setState: function(key, value) {\r\n        if (window.sessionStorage && typeof window.sessionStorage.setItem == 'function') {\r\n            window.sessionStorage.setItem(key, value);\r\n        }\r\n\r\n        else\r\n        {\r\n            if (!this.sessionStorage) {\r\n                this.sessionStorage = {};\r\n            }\r\n\r\n            this.sessionStorage[key] = value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * @param string|int key\r\n     * @param string value\r\n     */\r\n    getState: function(key, defaultValue) {\r\n        if (window.sessionStorage && typeof window.sessionStorage.getItem == 'function') {\r\n            window.sessionStorage.getItem(key, value);\r\n        }\r\n\r\n        else\r\n        {\r\n            if (!this.sessionStorage) {\r\n                this.sessionStorage = {};\r\n            }\r\n\r\n            this.sessionStorage[key] = value;\r\n        }\r\n    },\r\n\r\n    /**\r\n     * Logs a message to the console.\r\n     *\r\n     * @param mixed msg\r\n     * @return void\r\n     */\r\n    log: function(msg) {\r\n      if (App.isLocalEnvironment && console) {\n        console.log(msg);\n      }\n    },\r\n\r\n    /**\r\n     * Logs an info message to the console.\r\n     *\r\n     * @param mixed msg\r\n     * @return void\r\n     */\r\n    info: function(msg) {\n      if (/*App.isLocalEnvironment &&*/ console && typeof console.info == 'function') {\n        console.info(msg);\n      }\n    },\r\n\r\n    /**\r\n     * Logs an error message to the console.\r\n     *\r\n     * @param string msg\r\n     * @return bool\r\n     */\r\n    error: function(msg) {\r\n\r\n        if (console && typeof console.error == 'function') {\r\n            console.error(msg);\r\n        }\r\n\r\n        return false;\r\n    }\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n * @author  Frank Yaw (frank@frnk.ca)\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.alphabetField = function( options ) {\r\n\r\n        // Add \"remote\" class.\r\n        this.addClass('remote');\r\n\r\n        // Convert selectize items to array of objects\r\n        if (typeof options.selectizeItems === 'object')\r\n        {\r\n            if (!Array.isArray(options.selectizeItems) || typeof options.selectizeItems.length === undefined)\r\n            {\r\n                var itemsArray = [];\r\n\r\n                for (var key in options.selectizeItems)\r\n                {\r\n                    var item = {};\r\n                    item[key] = options.selectizeItems[key];\r\n                    itemsArray.push(item);\r\n                }\r\n\r\n                options.selectizeItems = itemsArray;\r\n            }\r\n        }\r\n\r\n        // Initialize selectize input.\r\n        var $select = this.selectize({\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'transliteration'],\r\n            options: options.selectizeItems,\r\n            plugins: (options.selectizePlugins || null),\r\n            create: false,\r\n            maxItems: (options.maxItems || 10),\r\n            render: {\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                option: function(item, escape)\r\n                {\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(item.name) + '</span>' +\r\n                                ' (' + escape(item.code) + ')' +\r\n                            '</div>';\r\n                }\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            load: function(query, callback) {\r\n                if (!query.trim().length) return callback();\r\n                $.ajax({\r\n                    url:  '/api/0.1/alphabet/search/' + App.urlencode(query.trim()),\r\n                    type: 'GET',\r\n                    error: function() {\r\n                        callback();\r\n                    },\r\n                    success: function(results) {\r\n                        callback(results);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            onItemAdd: options.onItemAdd || null\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.alphabetLookup = function( setup ) {\r\n\r\n        var $resLookup = this.resourceLookup($.extend(setup, {\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'transliteration'],\r\n            apiEndpoint: App.root + 'api/0.1/alphabet/search/:query',\r\n            render:\r\n            {\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                option: function(item, escape)\r\n                {\r\n                    // Language title\r\n                    var title = item.name;\r\n                    if (item.transliteration && item.transliteration.length)\r\n                        title += ' ('+ item.transliteration +')';\r\n\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(title) + '</span>' +\r\n                            '</div>';\r\n                }\r\n            }\r\n        }));\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     * @param mixed elem\r\n     */\r\n    $.fn.copyOnClick = function( setup ) {\r\n\r\n        // Create a new Clipboard instance.\r\n        var cb = new Clipboard(this.selector);\r\n\r\n        //\r\n        this.css('cursor', 'pointer');\r\n\r\n        // Success message.\r\n        cb.on('success', function(e) {\r\n\r\n            e.clearSelection();\r\n\r\n            // TODO: element = e.trigger\r\n\r\n            alert('Copied to clipboard!');\r\n        });\r\n\r\n        // Error message.\r\n        cb.on('error', function(e) {\r\n\r\n            var msg = '',\r\n                actionKey = (e.action === 'cut' ? 'X' : 'C');\r\n\r\n            if (/iPhone|iPad/i.test(navigator.userAgent)) {\r\n                msg = 'No support :(';\r\n            }\r\n\r\n            else if (/Mac/i.test(navigator.userAgent)){\r\n                msg = 'Press ⌘-' + actionKey + ' to ' + action;\r\n            }\r\n\r\n            else {\r\n                msg = 'Press Ctrl-' + actionKey + ' to ' + action;\r\n            }\r\n\r\n            alert(msg);\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.countryLookup = function( setup ) {\r\n\r\n        var $resLookup = this.resourceLookup($.extend(setup, {\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'altNames'],\r\n            apiEndpoint: App.root + 'api/0.1/country/search/:query',\r\n            render:\r\n            {\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                option: function(item, escape)\r\n                {\r\n                    // Language title\r\n                    var title = item.name;\r\n\r\n                    // Add a short desciption\r\n                    var hint = '';\r\n                    if (item.altNames && item.altNames.length)\r\n                        hint = '<span class=\"hint\"> &mdash; Also known as '+ item.altNames + '</span>';\r\n\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(title) + '</span>' + hint +\r\n                            '</div>';\r\n                }\r\n            }\r\n        }));\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.definitionLookup = function( setup ) {\r\n\r\n        var $resLookup = this.resourceLookup($.extend(setup, {\r\n            labelField: 'mainTitle',\r\n            apiEndpoint: App.root + 'api/0.1/definition/search/:query?lang=' + (setup.lang || ''),\r\n            render:\r\n            {\r\n                option: function(item, escape) {\r\n\r\n                    // Use main title as a label.\r\n                    var label = escape(item.mainTitle);\r\n\r\n                    // Append translation to label.\r\n                    if (item.translation && item.translation.practical) {\r\n                        if (item.translation.practical.eng) {\r\n                            label += ' (' + escape(item.translation.practical.eng) + ')';\r\n                        }\r\n                    }\r\n\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + label + '</span>' +\r\n                            '</div>';\r\n                }\r\n            }\r\n        }));\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n * @author  Frank Yaw (frank@frnk.ca)\r\n */\r\n\r\n/**\r\n * @param options.form      Form name in DOM.\r\n * @param options.clear     Selector for clear button.\r\n * @param options.container Container for search results.\r\n */\r\nvar DiNkomoDictionary = function(options) {\r\n\r\n  options = options || {};\r\n\r\n  // Find dictionary form & form elements.\r\n  var form = {};\r\n  form.form = $(document[options.form || 'dictionary']);\r\n  form.query = $(document[options.form || 'dictionary'].q);\r\n  form.clear = $(options.clear || 'input[name=clear]');\r\n  form.container = $(options.results || '#results');\r\n\r\n  if (!form.form)\r\n    return Utilities.error('Dictionary form not found.');\r\n\r\n  else if (!form.query || !form.clear)\r\n    return Utilities.error('Dictionary form not valid.');\r\n\r\n  else if (!form.container)\r\n    return Utilities.error('Dictionary results container not found.');\r\n\r\n  // Container contents.\r\n  form.clearedContainer = form.container.html();\r\n\r\n  // API endpoint.\r\n  form.endpoint = '/api/0.1/search/:query';\r\n\r\n  /**\r\n   * On submit event listener for search form.\r\n   *\r\n   * @param object event\r\n   * @return void\r\n   */\r\n  var onSubmit = function(event) {\r\n\r\n    event.preventDefault();\r\n    var form = event.data;\r\n\r\n    // Performance check\r\n    var query = form.query.val().trim();\r\n    if (query.length < 2) {\r\n      form.query.focus();\r\n      return false;\r\n    }\r\n\r\n    // Display loading message\r\n    form.container.html('<div class=\"text-center\">looking up '+ query +'...</div>');\r\n\r\n    // Track event.\r\n    Analytics.track('queries', {\r\n      type: 'general',\r\n      query: query,\r\n      language: (options.langCode || ''),\r\n      locale: 'en'\r\n    });\r\n\r\n    // Start ajax request\r\n    $.ajax({\r\n      url: form.endpoint.replace(':query', App.urlencode(query)) +\r\n        '?lang='+ (options.langCode || '') +\r\n        '&locale=eng',\r\n      type: 'GET',\r\n      error: form.onSubmitError,\r\n      success: function(results)\r\n      {\r\n        if (results.length > 0)\r\n        {\r\n          var html =\r\n            '<div class=\"text-center\">' +\r\n              'we found <em>'+ results.length +'</em> results' +\r\n              ' for <i>' + query + '</i>.' +\r\n            '</div>' +\r\n            '<ol>';\r\n\r\n          for (var i in results)\r\n          {\r\n              switch (results[i].resourceType)\r\n              {\r\n                  case 'language':\r\n                      html += form.formatLanguageResult(results[i]);\r\n                      break;\r\n\r\n                  case 'definition':\r\n                      html += form.formatDefinitionResult(results[i]);\r\n                      break;\r\n              }\r\n          }\r\n\r\n          form.container.html(html +'</ol>');\r\n        }\r\n\r\n        else {\r\n          form.container.html(\r\n            '<div class=\"center\">' +\r\n              'we couldn\\'t find anything matching that query ' +\r\n              '<span class=\"fa fa-frown-o\"></span>' +\r\n            '</div>'\r\n          );\r\n        }\r\n      }\r\n    });\r\n\r\n    //return false;\r\n  };\r\n\r\n  /**\r\n   * Handles ajax errors.\r\n   *\r\n   * @param object xhr\r\n   * @param string status\r\n   * @param string error\r\n   */\r\n  form.onSubmitError = function(xhr, status, error) {\r\n\r\n      Utilities.error('Dictionary error: '+ error +' ('+ xhr.status +')');\r\n\r\n      this.results.html(\r\n          '<div class=\"center\">'+\r\n              'Seems like we ran into a snag <span class=\"fa fa-frown-o\"></span> ' +\r\n              'please try again later.' +\r\n          '</div>');\r\n\r\n  }.bind(form);\r\n\r\n  /**\r\n   * Formats a language result.\r\n   *\r\n   * @param object language\r\n   */\r\n  form.formatLanguageResult = function(language) {\r\n\r\n      var row =\r\n          '<li>' +\r\n              '<a href=\"' + language.uri + '\">' +\r\n                  language.name +\r\n              '</a> ';\r\n\r\n      // Add parent language.\r\n      if (language.parentCode && language.parentCode.length >= 3) {\r\n          row +=\r\n          'is a child language of ' +\r\n          '<a href=\"' + language.parentUri + '\">' +\r\n              language.parentName +\r\n          '</a>';\r\n      }\r\n\r\n      else {\r\n          row += 'is a language';\r\n      }\r\n\r\n      row += '</li>';\r\n\r\n      return row;\r\n  };\r\n\r\n  /**\r\n   * Formats a definition results.\r\n   *\r\n   * @param object definition\r\n   */\r\n  form.formatDefinitionResult = function(definition) {\r\n\r\n      var row =\r\n          '<li>' +\r\n              '<a href=\"' + definition.uri + '\">' +\r\n                  definition.mainTitle +\r\n              '</a> ' +\r\n              '<small>' +\r\n                  '(' + definition.subType + ')' +\r\n              '</small> '+\r\n              'is a ' + definition.type + ' that means ' +\r\n              '<i>' + definition.translation.practical + '</i> in '+\r\n              '<a href=\"' + definition.mainLanguage.uri + '\">' +\r\n                  definition.mainLanguage.name +\r\n              '</a>' +\r\n          '</li>';\r\n\r\n      return row;\r\n  };\r\n\r\n  // Attach onSubmit listener.\r\n  form.form.submit(form, onSubmit);\r\n\r\n  // Attach clear form listener.\r\n  form.clear.click(function() {\r\n     this.query.val('');\r\n     this.container.html(this.clearedContainer);\r\n     this.query.focus();\r\n }.bind(form));\r\n\r\n // If the form already has a query, look it up.\r\n if (form.query.val().trim().length > 0) {\r\n     form.form.submit();\r\n }\r\n\r\n  Utilities.info('Dictionary form initialized.');\r\n\r\n  return form;\r\n};\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\n */\r\n(function ( $ ) {\n\n  /**\n   * @param object options\n   * @return object|false\n   */\n  $.fn.dictionary = function( options ) {\n\n    options = options || {};\n\n    // Find dictionary form & form elements.\n    var form = {};\n    form.form = this;\n    form.query = this.find('input[name=q]');\n    form.clear = this.find('input[name=clear]');\n    form.container = $(options.results || '#results');\n\n    if (!form.query || !form.clear) {\n      return Utilities.error('Dictionary form not valid.');\n    }\n\n    else if (!form.container) {\n      return Utilities.error('Dictionary results container not found.');\n    }\n\n    // Container contents.\n    form.clearedContainer = form.container.html();\n\n    // API endpoint.\n    form.endpoint = options.endpoint || '/api/0.1/search/:query';\n\n    /**\n     * onSubmit event listener for search form.\n     *\n     * @param object event\n     * @return void\n     */\n    var onSubmit = function(event) {\n\n      event.preventDefault();\n      var form = event.data;\n\n      // Performance check\n      var query = form.query.val().trim();\n      if (query.length < 2) {\n        form.query.focus();\n        return false;\n      }\n\n      // Display loading message\n      form.container.html('<div class=\"text-center\">looking up '+ query +'...</div>');\n\n      // Track event.\n      Analytics.track('queries', {\n        type: 'general',\n        medium: 'web',\n        query: query,\n        language: (options.langCode || 'None specified'),\n        locale: 'en'\n      });\n\n      // Start ajax request\n      $.ajax({\n        url: form.endpoint.replace(':query', App.urlencode(query)) +\n          '?lang='+ (options.langCode || '') +\n          '&locale=en',\n        type: 'GET',\n        error: form.onSubmitError,\n        success: function(results)\n        {\n          if (results.length > 0)\n          {\n            var html =\n              '<div class=\"text-center\">' +\n                'we found <em>'+ results.length +'</em> results' +\n                ' for <i>' + query + '</i>.' +\n              '</div>' +\n              '<ol>';\n\n            for (var i in results)\n            {\n              switch (results[i].resourceType)\n              {\n                case 'language':\n                  html += form.formatLanguageResult(results[i]);\n                  break;\n\n                case 'definition':\n                  html += form.formatDefinitionResult(results[i]);\n                  break;\n              }\n            }\n\n            form.container.html(html +'</ol>');\n          }\n\n          else {\n            form.container.html(\n              '<div class=\"center\">' +\n                'we couldn\\'t find anything matching that query ' +\n                '<span class=\"fa fa-frown-o\"></span>' +\n              '</div>'\n            );\n          }\n        }\n      });\n    };\n\n    /**\n     * Handles ajax errors.\n     *\n     * @param object xhr\n     * @param string status\n     * @param string error\n     */\n    form.onSubmitError = function(xhr, status, error) {\n\n        Utilities.error('Dictionary error: '+ error +' ('+ xhr.status +')');\n\n        this.results.html(\n            '<div class=\"center\">'+\n                'Seems like we ran into a snag <span class=\"fa fa-frown-o\"></span> ' +\n                'please try again later.' +\n            '</div>');\n\n    }.bind(form);\n\n    /**\n     * Formats a language result.\n     *\n     * @param object language\n     */\n    form.formatLanguageResult = function(language) {\n\n      var row =\n        '<li>' +\n          '<a href=\"' + language.uri + '\">' +\n            language.name +\n          '</a> ';\n\n      // Add parent language.\n      if (language.parentCode && language.parentCode.length >= 3) {\n        row +=\n        'is a child language of ' +\n        '<a href=\"' + language.parentUri + '\">' +\n          language.parentName +\n        '</a>';\n      }\n\n      else {\n        row += 'is a language';\n      }\n\n      row += '</li>';\n\n      return row;\n    };\n\n    /**\n     * Formats a definition results.\n     *\n     * @param object definition\n     */\n    form.formatDefinitionResult = function(definition) {\n\n      var row =\n        '<li>' +\n          '<a href=\"' + definition.uri + '\">' +\n            definition.mainTitle +\n          '</a> ' +\n          '<small>' +\n            '(' + definition.subType + ')' +\n          '</small> '+\n          'is a ' + definition.type + ' that means ' +\n          '<i>' + definition.translation.practical + '</i> in '+\n          '<a href=\"' + definition.mainLanguage.uri + '\">' +\n            definition.mainLanguage.name +\n          '</a>' +\n        '</li>';\n\n      return row;\n    };\n\n    // Attach onSubmit listener.\n    form.form.submit(form, onSubmit);\n\n    // Attach clear form listener.\n    form.clear.click(function() {\n      this.query.val('');\n      this.container.html(this.clearedContainer);\n      this.query.focus();\n   }.bind(form));\n\n   // If the form already has a query, look it up.\n   if (form.query.val().trim().length > 0) {\n       form.form.submit();\n   }\n\n    Utilities.info('Dictionary form ready.');\n\n    return form;\n  };\n\n}( jQuery ));\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.languageLookup = function( setup ) {\r\n\r\n        var $resLookup = this.resourceLookup($.extend(setup, {\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'transliteration', 'altNames'],\r\n            maxItems: 1,\r\n            apiEndpoint: App.root + 'api/0.1/language/search/:query',\r\n            render:\r\n            {\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                option: function(item, escape)\r\n                {\r\n                    // Language title\r\n                    var title = item.name;\r\n                    if (item.parentName && item.parentName.length)\r\n                        title += ' (a sub-language of '+ item.parentName +')';\r\n\r\n                    // Add a short desciption\r\n                    var hint = '';\r\n                    if (item.altNames && item.altNames.length)\r\n                        hint = '<span class=\"hint\"> &mdash; Also known as '+ item.altNames + '</span>';\r\n\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(title) + '</span>' + hint +\r\n                            '</div>';\r\n                }\r\n            }\r\n        }));\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n * @author  Frank Yaw (frank@frnk.ca)\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.langSearch = function( options ) {\r\n\r\n        options = options || {};\r\n\r\n        // Add \"remote\" class.\r\n        this.addClass('remote');\r\n\r\n        // Initialize selectize input.\r\n        var $select = this.selectize({\r\n            valueField: 'code',\r\n            labelField: 'name',\r\n            searchField: ['code', 'name', 'altNames'],\r\n            options: options.selectizeItems,\r\n            plugins: (options.selectizePlugins || null),\r\n            create: false,\r\n            maxItems: (options.maxItems || 1),\r\n            render: {\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                score: function(search) {\r\n                    return this.getScoreFunction(search);\r\n                },\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                option: function(item, escape)\r\n                {\r\n                    // Language title\r\n                    var title   = item.name;\r\n                    if (item.parentName && item.parentName.length)\r\n                        title += ' (a sub-language of '+ item.parentName +')';\r\n\r\n                    // Add a short desciption\r\n                    var hint = '';\r\n                    if (item.altNames && item.altNames.length)\r\n                        hint = '<span class=\"hint\"> &mdash; Also known as '+ item.altNames + '</span>';\r\n\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(title) + '</span>' + hint +\r\n                            '</div>';\r\n                }\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            load: function(query, callback) {\r\n                if (!query.trim().length) return callback();\r\n                $.ajax({\r\n                    url: App.root +'api/0.1/language/search/' + App.urlencode(query.trim()),\r\n                    type: 'GET',\r\n                    error: function() {\r\n                        callback();\r\n                    },\r\n                    success: function(results) {\r\n                        callback(results);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            onItemAdd: options.onItemAdd || null\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.referenceLookup = function( setup ) {\r\n\r\n        var $resLookup = this.resourceLookup($.extend(setup, {\r\n            valueField: 'id',\r\n            labelField: 'name',\r\n            searchField: ['name', 'fullCitation'],\r\n            apiEndpoint: App.root + 'api/0.1/reference/search/:query?embed=name,fullCitation',\r\n            render:\r\n            {\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.name) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                option: function(item, escape)\r\n                {\r\n                    // Return formatted HTML\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(item.fullCitation) + '</span>' + hint +\r\n                            '</div>';\r\n                }\r\n            }\r\n        }));\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.resourceLookup = function( setup ) {\r\n\r\n        // Selectize setup.\r\n        setup = setup || {};\r\n        setup.valueField = setup.valueField || 'uniqueId';\r\n        setup.delimiter = setup.delimiter || ',';\r\n        setup.labelField = setup.labelField || 'title';\r\n        setup.searchField = setup.searchField || [setup.labelField];\r\n        setup.options = setup.options || setup.selectizeItems;\r\n        setup.selectizePlugins = setup.selectizePlugins || null;\r\n        setup.create = setup.create || false;\r\n        setup.maxItems = setup.maxItems || 100;\r\n        setup.loadThrottle = setup.loadThrottle || 600;\r\n        setup.render = setup.render || {};\r\n\r\n        // Default to tag API endpoint.\r\n        setup.apiEndpoint = setup.apiEndpoint || App.root +'api/0.1/tag/search/:query';\r\n\r\n        /**\r\n         *\r\n         */\r\n        setup.load = function(query, callback) {\r\n\r\n            if (!query.trim().length) return callback();\r\n\r\n            $.ajax({\r\n                url: this.apiEndpoint.replace(':query', App.urlencode(query.trim())),\r\n                type: 'GET',\r\n                error: function() {\r\n                    callback();\r\n                },\r\n                success: function(results) {\r\n                    callback(results);\r\n                }\r\n            });\r\n        }.bind(setup);\r\n\r\n        if (typeof setup.render.item != 'function')\r\n        {\r\n            /**\r\n             *\r\n             */\r\n            setup.render.item = function(item, escape) {\r\n                return  '<div>' +\r\n                            '<span class=\"name\">' + escape(item[this.labelField]) + '</span>' +\r\n                        '</div>';\r\n            }.bind(setup);\r\n        }\r\n\r\n        if (typeof setup.render.score != 'function')\r\n        {\r\n            /**\r\n             *\r\n             */\r\n            setup.render.score = function(search) {\r\n                return this.getScoreFunction(search);\r\n            };\r\n        }\r\n\r\n        if (typeof setup.render.option != 'function')\r\n        {\r\n            /**\r\n             *\r\n             */\r\n            setup.render.option = function(item, escape) {\r\n                return  '<div>' +\r\n                            '<span class=\"label\">' + escape(item[this.labelField]) + '</span>' +\r\n                        '</div>';\r\n            }.bind(setup);\r\n        }\r\n\r\n        // Add \"remote\" class.\r\n        this.addClass('remote');\r\n\r\n        // Initialize selectize input.\r\n        var $select = this.selectize(setup);\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n","/**\r\n * Copyright Di Nkɔmɔ(TM) 2016, all rights reserved.\r\n *\r\n * @author  Frank Yaw (frank@frnk.ca)\r\n */\r\n(function ( $ ) {\r\n\r\n    /**\r\n     *\r\n     */\r\n    $.fn.tagSearch = function( options ) {\r\n\r\n        options = options || {};\r\n\r\n        // Add \"remote\" class.\r\n        this.addClass('remote');\r\n\r\n        // Initialize selectize input.\r\n        var $select = this.selectize({\r\n            valueField: 'uniqueId',\r\n            labelField: 'title',\r\n            searchField: ['title'],\r\n            options: options.selectizeItems,\r\n            plugins: (options.selectizePlugins || null),\r\n            create: true,\r\n            maxItems: (options.maxItems || 20),\r\n            render: {\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                item: function(item, escape) {\r\n                    return  '<div>' +\r\n                                '<span class=\"name\">' + escape(item.title) + '</span>' +\r\n                            '</div>';\r\n                },\r\n\r\n                /**\r\n                 *\r\n                 */\r\n                score: function(search) {\r\n                    return this.getScoreFunction(search);\r\n                },\r\n\r\n                /**\r\n                 * @param object item\r\n                 * @param function escpae\r\n                 */\r\n                option: function(item, escape)\r\n                {\r\n                    return  '<div>' +\r\n                                '<span class=\"label\">' + escape(item.title) + '</span>' +\r\n                            '</div>';\r\n                }\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            load: function(query, callback) {\r\n\r\n                if (!query.trim().length) return callback();\r\n\r\n                $.ajax({\r\n                    url: App.root +'api/0.1/tag/search/' + App.urlencode(query.trim()),\r\n                    type: 'GET',\r\n                    error: function() {\r\n                        callback();\r\n                    },\r\n                    success: function(results) {\r\n                        callback(results);\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             *\r\n             */\r\n            onItemAdd: options.onItemAdd || null\r\n        });\r\n\r\n        return this;\r\n    };\r\n\r\n}( jQuery ));\r\n"],"sourceRoot":"/source/"}